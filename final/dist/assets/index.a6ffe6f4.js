var I=Object.defineProperty;var E=(s,t,o)=>t in s?I(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o;var e=(s,t,o)=>(E(s,typeof t!="symbol"?t+"":t,o),o);import{S as H,P as j,O as N,A as V,a as M,B as $,T as m,M as b,b as P,c as p,d as T,W as q,R as U,G as k,e as v,f as d,g as X,h as Y,i as J,j as K,k as Q,l as Z,D as ee,C as te,V as L}from"./vendor.84fc4b09.js";const ie=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&h(u)}).observe(document,{childList:!0,subtree:!0});function o(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(i){if(i.ep)return;i.ep=!0;const r=o(i);fetch(i.href,r)}};ie();class se{constructor(t){e(this,"scene");e(this,"camera");e(this,"renderer");e(this,"controls");this.scene=new H,this.camera=new j(55,window.innerWidth/window.innerHeight,45,3e4),this.camera.position.set(0,5e3,7200),this.renderer=t,this.controls=new N(this.camera,this.renderer.domElement)}update(t){}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}class oe extends se{constructor(t){super(t);e(this,"lightAmbient");e(this,"lightPoint");e(this,"lightPoint2");e(this,"skybox");e(this,"interstellar");e(this,"galaxy");e(this,"water");e(this,"board");e(this,"person");e(this,"fish");e(this,"group");e(this,"fishGroup");e(this,"bubble");e(this,"bubbleTwo");e(this,"bubbleThree");e(this,"planeOne");e(this,"planeTwo");e(this,"planeThree");e(this,"planeFour");this.lightAmbient=new V(3355443),this.scene.add(this.lightAmbient),this.lightPoint=new M(16777215),this.lightPoint.position.set(0,1e3,5e3),this.lightPoint.castShadow=!0,this.lightPoint.intensity=.8,this.scene.add(this.lightPoint),this.lightPoint2=new M(16777215),this.lightPoint2.position.set(0,1e3,-5e3),this.lightPoint2.castShadow=!0,this.lightPoint2.intensity=1,this.scene.add(this.lightPoint2);const o=1024,h=.5,i=500;this.lightPoint.shadow.mapSize.width=o,this.lightPoint.shadow.mapSize.height=o,this.lightPoint.shadow.camera.near=h,this.lightPoint.shadow.camera.far=i;const r=["../resources/images/Daylight_Box_Front.png","../resources/images/Daylight_Box_Back.png","../resources/images/Daylight_Box_Top.png","../resources/images/Daylight_Box_Bottom.png","../resources/images/Daylight_Box_Left.png","../resources/images/Daylight_Box_Right.png"],u=["../resources/images/zpos.png","../resources/images/zneg.png","../resources/images/ypos.png","../resources/images/yneg.png","../resources/images/xneg.png","../resources/images/xpos.png"],B=["../resources/images/gloomy_ft.png","../resources/images/gloomy_bk.png","../resources/images/gloomy_up.png","../resources/images/gloomy_dn.png","../resources/images/gloomy_rt.png","../resources/images/gloomy_lf.png"],y=new $(1e4,1e4,1e4),O=r.map(n=>{let l=new m().load(n);return new b({map:l,side:P})});this.skybox=new p(y,O),this.scene.add(this.skybox);const F=u.map(n=>{let l=new m().load(n);return new b({map:l,side:P})});this.interstellar=new p(y,F);const W=B.map(n=>{let l=new m().load(n);return new b({map:l,side:P})});this.galaxy=new p(y,W);const A=new T(1e4,1e4);this.water=new q(A,{textureWidth:510,textureHeight:510,waterNormals:new m().load("../resources/textures/watertexture.jpg",function(n){n.wrapS=n.wrapT=U}),waterColor:742292,distortionScale:10}),this.water.rotation.x=-Math.PI/2,this.scene.add(this.water),this.group=new k,this.scene.add(this.group),new v().load("../resources/models/board.gltf",n=>{this.board=n.scene,this.board.scale.set(2,2,2),this.board.position.y=-520,this.board.position.z=4200,this.board.position.x=-1290,this.board.rotateY(83.2),this.board.traverse(l=>{l.type==="Mesh"&&(l.material=new d({color:6173737}))}),this.group.add(this.board)}),new v().load("../resources/models/clone.gltf",n=>{this.person=n.scene,this.person.scale.set(2,2,2),this.person.position.y=600,this.person.position.z=4e3,this.person.position.x=-20,this.person.traverse(l=>{l.type==="Mesh"&&(l.material=new d({color:13998224}))}),this.group.add(this.person)});const x=new X(400,100),C=new d({color:11526575,opacity:.4,transparent:!0});this.bubble=new p(x,C),this.bubble.position.x=-2200,this.bubble.position.y=600,this.bubble.position.z=-2e3,this.scene.add(this.bubble);const D=new d({color:13041721,opacity:.4,transparent:!0});this.bubbleTwo=new p(x,D),this.bubbleTwo.position.x=2200,this.bubbleTwo.position.y=600,this.bubbleTwo.position.z=-2e3,this.scene.add(this.bubbleTwo);const R=new d({color:11393254,opacity:.4,transparent:!0});this.bubbleThree=new p(x,R),this.bubbleThree.position.y=600,this.bubbleThree.position.z=-2e3,this.scene.add(this.bubbleThree);const g=new T(600,600),w=new b({color:16777215,opacity:.5,transparent:!0});this.planeOne=new p(g,w),this.planeOne.rotation.x=-Math.PI/2,this.planeOne.position.set(-1500,100,3e3),this.scene.add(this.planeOne),this.planeTwo=new p(g,w),this.planeTwo.rotation.x=-Math.PI/2,this.planeTwo.position.set(0,100,3e3),this.scene.add(this.planeTwo),this.planeThree=new p(g,w),this.planeThree.rotation.x=-Math.PI/2,this.planeThree.position.set(1500,100,3e3),this.scene.add(this.planeThree),this.planeFour=new p(g,w),this.planeFour.rotation.x=-Math.PI/2,this.planeFour.position.set(0,100,1500),this.scene.add(this.planeFour),this.fishGroup=new k,this.scene.add(this.fishGroup);for(let n=0;n<5;n++)this.addFish()}addFish(){new Y().load("../resources/models/fish.obj",o=>{this.fish=o,this.fish.scale.set(20,20,20),this.fish.position.set(Math.random()*(4400+4400+1)-4400,0,Math.random()*(0+4e3+1)-4e3),this.fish.rotateX(180.7),this.fish.traverse(h=>{h.type==="Mesh"&&(h.material=new d({color:16753920}))}),this.fishGroup.add(this.fish)})}update(t){this.water.material.uniforms.time.value+=1/30,this.group.position.z<=-800&&this.group.position.z>=-1200&&this.group.position.x===0?this.fishGroup.position.z+=10:this.group.position.z<=-2300&&this.group.position.z>=-2700&&this.group.position.x===0?this.fishGroup.position.z-=10:this.group.position.z<=-800&&this.group.position.z>=-1200&&this.group.position.x<=-1300&&this.group.position.x>=-1600?this.fishGroup.position.x-=10:this.group.position.z<=-800&&this.group.position.z>=-1200&&this.group.position.x<=1800&&this.group.position.x>=1400&&(this.fishGroup.position.x+=10),this.group.position.x==-2200&&this.group.position.z==-6e3?(this.scene.add(this.interstellar),this.fishGroup.visible=!1,this.scene.children.includes(this.skybox)?this.scene.remove(this.skybox):this.scene.children.includes(this.galaxy)&&this.scene.remove(this.galaxy)):this.group.position.x==2200&&this.group.position.z==-6e3?(this.scene.add(this.galaxy),this.scene.children.includes(this.skybox)?this.scene.remove(this.skybox):this.scene.children.includes(this.galaxy)&&this.scene.remove(this.interstellar)):this.group.position.x==0&&this.group.position.z==-6e3&&(this.scene.add(this.skybox),this.fishGroup.visible=!0,this.scene.children.includes(this.galaxy)?this.scene.remove(this.galaxy):this.scene.children.includes(this.interstellar)&&this.scene.remove(this.interstellar))}}let c,G=new te,f,z,a,S;function ne(){ae(),re(),he()}function re(){f=new J,document.body.appendChild(f.dom)}function ae(){c=new K,c.shadowMap.enabled=!0,c.shadowMap.type=Q,c.setPixelRatio(window.devicePixelRatio),c.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(c.domElement),a=new oe(c),z=new L(0,0);const s={u_time:{type:"f",value:1},u_resolution:{type:"v2",value:new L(800,800)}};S=new Z({uniforms:s,side:ee}),_()}function he(){window.addEventListener("resize",le,!1),window.addEventListener("pointermove",pe),window.addEventListener("keydown",s=>{const{key:t}=s;switch(t){case"e":const o=window.open("","Canvas Image"),{domElement:h}=c,i=h.toDataURL();if(!o)return;o.document.write(`<img src='${i}' width='${h.width}' height='${h.height}'>`);break;case"ArrowRight":a.group.position.x+=100,a.camera.position.x+=100;break;case"ArrowLeft":a.group.position.x-=100,a.camera.position.x-=100;break;case"ArrowUp":a.group.position.z-=100,a.camera.position.z-=100;break;case"ArrowDown":a.group.position.z+=100,a.camera.position.z+=100;break}})}function le(){a.onWindowResize()}function pe(s){z.x=s.clientX/window.innerWidth*2-1,z.y=-(s.clientY/window.innerHeight)*2+1}function _(){requestAnimationFrame(()=>{_()});let s=G.getDelta();S.uniforms.u_time.value+=s,a.update(G),f&&f.update(),c.render(a.scene,a.camera)}ne();
