var G=Object.defineProperty;var C=(i,e,o)=>e in i?G(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o;var s=(i,e,o)=>(C(i,typeof e!="symbol"?e+"":e,o),o);import{S as O,P as E,O as F,A as H,a as k,B as I,T as g,M as y,b as f,c as d,d as j,W as N,R as V,G as $,e as P,f as u,g as q,h as U,i as X,j as Y,k as J,l as K,D as Q,C as Z,V as v}from"./vendor.84fc4b09.js";const ee=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}};ee();class te{constructor(e){s(this,"scene");s(this,"camera");s(this,"renderer");s(this,"controls");this.scene=new O,this.camera=new E(55,window.innerWidth/window.innerHeight,45,3e4),this.camera.position.set(0,5e3,7200),this.renderer=e,this.controls=new F(this.camera,this.renderer.domElement)}update(e){}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}class se extends te{constructor(e){super(e);s(this,"lightAmbient");s(this,"lightPoint");s(this,"lightPoint2");s(this,"skybox");s(this,"interstellar");s(this,"galaxy");s(this,"water");s(this,"board");s(this,"person");s(this,"fish");s(this,"group");s(this,"bubble");s(this,"bubbleTwo");s(this,"bubbleThree");this.lightAmbient=new H(3355443),this.scene.add(this.lightAmbient),this.lightPoint=new k(16777215),this.lightPoint.position.set(0,1e3,5e3),this.lightPoint.castShadow=!0,this.lightPoint.intensity=.8,this.scene.add(this.lightPoint),this.lightPoint2=new k(16777215),this.lightPoint2.position.set(0,1e3,-5e3),this.lightPoint2.castShadow=!0,this.lightPoint2.intensity=1,this.scene.add(this.lightPoint2);const o=1024,c=.5,t=500;this.lightPoint.shadow.mapSize.width=o,this.lightPoint.shadow.mapSize.height=o,this.lightPoint.shadow.camera.near=c,this.lightPoint.shadow.camera.far=t;const n=["../resources/images/Daylight_Box_Front.png","../resources/images/Daylight_Box_Back.png","../resources/images/Daylight_Box_Top.png","../resources/images/Daylight_Box_Bottom.png","../resources/images/Daylight_Box_Left.png","../resources/images/Daylight_Box_Right.png"],p=["../resources/images/zpos.png","../resources/images/zneg.png","../resources/images/ypos.png","../resources/images/yneg.png","../resources/images/xneg.png","../resources/images/xpos.png"],S=["../resources/images/gloomy_ft.png","../resources/images/gloomy_bk.png","../resources/images/gloomy_up.png","../resources/images/gloomy_dn.png","../resources/images/gloomy_rt.png","../resources/images/gloomy_lf.png"],w=new I(1e4,1e4,1e4),T=n.map(a=>{let h=new g().load(a);return new y({map:h,side:f})});this.skybox=new d(w,T),this.scene.add(this.skybox);const _=p.map(a=>{let h=new g().load(a);return new y({map:h,side:f})});this.interstellar=new d(w,_);const B=S.map(a=>{let h=new g().load(a);return new y({map:h,side:f})});this.galaxy=new d(w,B);const W=new j(1e4,1e4);this.water=new N(W,{textureWidth:510,textureHeight:510,waterNormals:new g().load("../resources/textures/watertexture.jpg",function(a){a.wrapS=a.wrapT=V}),waterColor:742292,distortionScale:10}),this.water.rotation.x=-Math.PI/2,this.scene.add(this.water),this.group=new $,this.scene.add(this.group),new P().load("../resources/models/board.gltf",a=>{this.board=a.scene,this.board.scale.set(2,2,2),this.board.position.y=-520,this.board.position.z=4200,this.board.position.x=-1290,this.board.rotateY(83.2),this.board.traverse(h=>{h.type==="Mesh"&&(h.material=new u({color:6173737}))}),this.group.add(this.board)}),new P().load("../resources/models/clone.gltf",a=>{this.person=a.scene,this.person.scale.set(2,2,2),this.person.position.y=600,this.person.position.z=4e3,this.person.position.x=-20,this.person.traverse(h=>{h.type==="Mesh"&&(h.material=new u({color:13998224}))}),this.group.add(this.person)});const b=new q(400,100),A=new u({color:11526575,opacity:.4,transparent:!0});this.bubble=new d(b,A),this.bubble.position.x=-2200,this.bubble.position.y=600,this.bubble.position.z=-2e3,this.scene.add(this.bubble);const D=new u({color:13041721,opacity:.4,transparent:!0});this.bubbleTwo=new d(b,D),this.bubbleTwo.position.x=2200,this.bubbleTwo.position.y=600,this.bubbleTwo.position.z=-2e3,this.scene.add(this.bubbleTwo);const R=new u({color:11393254,opacity:.4,transparent:!0});this.bubbleThree=new d(b,R),this.bubbleThree.position.y=600,this.bubbleThree.position.z=-2e3,this.scene.add(this.bubbleThree)}addFish(){new U().load("../resources/models/fish.obj",o=>{this.fish=o,this.fish.scale.set(20,20,20),this.fish.position.set(Math.random()*-3e3,0,Math.random()*-7e3),this.fish.rotateX(180.7),this.scene.add(this.fish)})}update(e){this.water.material.uniforms.time.value+=1/30,this.group.position.x<=-2200&&this.group.position.z<=-5500?this.scene.children.includes(this.skybox)?(this.scene.remove(this.skybox),this.scene.add(this.interstellar)):this.scene.children.includes(this.galaxy)&&(this.scene.remove(this.galaxy),this.scene.add(this.interstellar)):this.group.position.x>=2200&&this.group.position.z>=-6100?this.scene.children.includes(this.skybox)?(this.scene.remove(this.skybox),this.scene.add(this.galaxy)):this.scene.children.includes(this.galaxy)&&(this.scene.remove(this.interstellar),this.scene.add(this.galaxy)):this.group.position.x==0&&this.group.position.z>=-6100&&(this.scene.children.includes(this.galaxy)?(this.scene.remove(this.galaxy),this.scene.add(this.skybox)):this.scene.children.includes(this.interstellar)&&(this.scene.remove(this.interstellar),this.scene.add(this.skybox)))}}let l,L=new Z,m,x,r,M;function ie(){ne(),oe(),re()}function oe(){m=new X,document.body.appendChild(m.dom)}function ne(){l=new Y,l.shadowMap.enabled=!0,l.shadowMap.type=J,l.setPixelRatio(window.devicePixelRatio),l.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(l.domElement),r=new se(l),x=new v(0,0);const i={u_time:{type:"f",value:1},u_resolution:{type:"v2",value:new v(800,800)}};M=new K({uniforms:i,side:Q}),z()}function re(){window.addEventListener("resize",ae,!1),window.addEventListener("pointermove",he),window.addEventListener("keydown",i=>{const{key:e}=i;switch(e){case"e":const o=window.open("","Canvas Image"),{domElement:c}=l,t=c.toDataURL();if(!o)return;o.document.write(`<img src='${t}' width='${c.width}' height='${c.height}'>`);break;case"ArrowRight":r.group.position.x+=100,r.camera.position.x+=100;break;case"ArrowLeft":r.group.position.x-=100,r.camera.position.x-=100;break;case"ArrowUp":r.group.position.z-=100,r.camera.position.z-=100;break;case"ArrowDown":r.group.position.z+=100,r.camera.position.z+=100;break}})}function ae(){r.onWindowResize()}function he(i){x.x=i.clientX/window.innerWidth*2-1,x.y=-(i.clientY/window.innerHeight)*2+1}function z(){requestAnimationFrame(()=>{z()});let i=L.getDelta();M.uniforms.u_time.value+=i,r.update(L),m&&m.update(),l.render(r.scene,r.camera)}ie();
