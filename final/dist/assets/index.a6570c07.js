var I=Object.defineProperty;var E=(o,i,t)=>i in o?I(o,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[i]=t;var e=(o,i,t)=>(E(o,typeof i!="symbol"?i+"":i,t),t);import{S as H,P as j,O as N,A as V,a as M,B as $,T as m,M as b,b as P,c as p,d as T,W as q,R as U,G as k,e as v,f as d,g as X,h as Y,i as J,j as K,k as Q,l as Z,D as ee,C as ie,V as L}from"./vendor.84fc4b09.js";const te=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&h(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function h(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}};te();class se{constructor(i){e(this,"scene");e(this,"camera");e(this,"renderer");e(this,"controls");this.scene=new H,this.camera=new j(55,window.innerWidth/window.innerHeight,45,3e4),this.camera.position.set(0,5e3,7200),this.renderer=i,this.controls=new N(this.camera,this.renderer.domElement)}update(i){}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}class oe extends se{constructor(i){super(i);e(this,"lightAmbient");e(this,"lightPoint");e(this,"lightPoint2");e(this,"skybox");e(this,"interstellar");e(this,"galaxy");e(this,"water");e(this,"board");e(this,"person");e(this,"fish");e(this,"group");e(this,"fishGroup");e(this,"bubble");e(this,"bubbleTwo");e(this,"bubbleThree");e(this,"planeOne");e(this,"planeTwo");e(this,"planeThree");e(this,"planeFour");this.lightAmbient=new V(3355443),this.scene.add(this.lightAmbient),this.lightPoint=new M(16777215),this.lightPoint.position.set(0,1e3,5e3),this.lightPoint.castShadow=!0,this.lightPoint.intensity=.8,this.scene.add(this.lightPoint),this.lightPoint2=new M(16777215),this.lightPoint2.position.set(0,1e3,-5e3),this.lightPoint2.castShadow=!0,this.lightPoint2.intensity=1,this.scene.add(this.lightPoint2);const t=1024,h=.5,s=500;this.lightPoint.shadow.mapSize.width=t,this.lightPoint.shadow.mapSize.height=t,this.lightPoint.shadow.camera.near=h,this.lightPoint.shadow.camera.far=s;const a=["../resources/images/Daylight_Box_Front.png","../resources/images/Daylight_Box_Back.png","../resources/images/Daylight_Box_Top.png","../resources/images/Daylight_Box_Bottom.png","../resources/images/Daylight_Box_Left.png","../resources/images/Daylight_Box_Right.png"],u=["../resources/images/zpos.png","../resources/images/zneg.png","../resources/images/ypos.png","../resources/images/yneg.png","../resources/images/xneg.png","../resources/images/xpos.png"],B=["../resources/images/gloomy_ft.png","../resources/images/gloomy_bk.png","../resources/images/gloomy_up.png","../resources/images/gloomy_dn.png","../resources/images/gloomy_rt.png","../resources/images/gloomy_lf.png"],y=new $(1e4,1e4,1e4),O=a.map(r=>{let l=new m().load(r);return new b({map:l,side:P})});this.skybox=new p(y,O),this.scene.add(this.skybox);const F=u.map(r=>{let l=new m().load(r);return new b({map:l,side:P})});this.interstellar=new p(y,F);const W=B.map(r=>{let l=new m().load(r);return new b({map:l,side:P})});this.galaxy=new p(y,W);const A=new T(1e4,1e4);this.water=new q(A,{textureWidth:510,textureHeight:510,waterNormals:new m().load("../resources/textures/watertexture.jpg",function(r){r.wrapS=r.wrapT=U}),waterColor:742292,distortionScale:10}),this.water.rotation.x=-Math.PI/2,this.scene.add(this.water),this.group=new k,this.scene.add(this.group),new v().load("../resources/models/board.gltf",r=>{this.board=r.scene,this.board.scale.set(2,2,2),this.board.position.y=-520,this.board.position.z=4200,this.board.position.x=-1290,this.board.rotateY(83.2),this.board.traverse(l=>{l.type==="Mesh"&&(l.material=new d({color:6173737}))}),this.group.add(this.board)}),new v().load("../resources/models/clone.gltf",r=>{this.person=r.scene,this.person.scale.set(2,2,2),this.person.position.y=600,this.person.position.z=4e3,this.person.position.x=-20,this.person.traverse(l=>{l.type==="Mesh"&&(l.material=new d({color:13998224}))}),this.group.add(this.person)});const x=new X(400,100),C=new d({color:11526575,opacity:.4,transparent:!0});this.bubble=new p(x,C),this.bubble.position.x=-2200,this.bubble.position.y=600,this.bubble.position.z=-2e3,this.scene.add(this.bubble);const D=new d({color:13041721,opacity:.4,transparent:!0});this.bubbleTwo=new p(x,D),this.bubbleTwo.position.x=2200,this.bubbleTwo.position.y=600,this.bubbleTwo.position.z=-2e3,this.scene.add(this.bubbleTwo);const R=new d({color:11393254,opacity:.4,transparent:!0});this.bubbleThree=new p(x,R),this.bubbleThree.position.y=600,this.bubbleThree.position.z=-2e3,this.scene.add(this.bubbleThree);const g=new T(600,600),w=new b({color:16777215,opacity:.5,transparent:!0});this.planeOne=new p(g,w),this.planeOne.rotation.x=-Math.PI/2,this.planeOne.position.set(-1500,100,3e3),this.scene.add(this.planeOne),this.planeTwo=new p(g,w),this.planeTwo.rotation.x=-Math.PI/2,this.planeTwo.position.set(0,100,3e3),this.scene.add(this.planeTwo),this.planeThree=new p(g,w),this.planeThree.rotation.x=-Math.PI/2,this.planeThree.position.set(1500,100,3e3),this.scene.add(this.planeThree),this.planeFour=new p(g,w),this.planeFour.rotation.x=-Math.PI/2,this.planeFour.position.set(0,100,1500),this.scene.add(this.planeFour),this.fishGroup=new k,this.scene.add(this.fishGroup);for(let r=0;r<5;r++)this.addFish()}addFish(){new Y().load("../resources/models/fish.obj",t=>{this.fish=t,this.fish.scale.set(20,20,20),this.fish.position.set(Math.random()*(4400+4400+1)-4400,0,Math.random()*(0+4e3+1)-4e3),this.fish.rotateX(180.7),this.fish.traverse(h=>{h.type==="Mesh"&&(h.material=new d({color:16753920}))}),this.fishGroup.add(this.fish)})}update(i){this.water.material.uniforms.time.value+=1/30,this.group.position.z<=-800&&this.group.position.z>=-1200&&this.group.position.x===0?this.fishGroup.position.z+=10:this.group.position.z<=-2300&&this.group.position.z>=-2700&&this.group.position.x===0?this.fishGroup.position.z-=10:this.group.position.z<=-800&&this.group.position.z>=-1200&&this.group.position.x<=-1300&&this.group.position.x>=-1600?this.fishGroup.position.x-=10:this.group.position.z<=-800&&this.group.position.z>=-1200&&this.group.position.x<=1800&&this.group.position.x>=1400&&(this.fishGroup.position.x+=10),this.group.position.x==-2200&&this.group.position.z==-6e3?(this.scene.add(this.interstellar),this.fishGroup.visible=!1,this.scene.children.includes(this.skybox)?this.scene.remove(this.skybox):this.scene.children.includes(this.galaxy)&&this.scene.remove(this.galaxy)):this.group.position.x==2200&&this.group.position.z==-6e3?(this.scene.add(this.galaxy),this.fishGroup.children.forEach(t=>{t.position.x-=20}),this.scene.children.includes(this.skybox)?this.scene.remove(this.skybox):this.scene.children.includes(this.galaxy)&&this.scene.remove(this.interstellar)):this.group.position.x==0&&this.group.position.z==-6e3&&(this.scene.add(this.skybox),this.fishGroup.visible=!0,this.fishGroup.children.forEach(t=>{t.position.x+=20}),this.scene.children.includes(this.galaxy)?this.scene.remove(this.galaxy):this.scene.children.includes(this.interstellar)&&this.scene.remove(this.interstellar))}}let c,G=new ie,f,z,n,S;function ne(){ae(),re(),he()}function re(){f=new J,document.body.appendChild(f.dom)}function ae(){c=new K,c.shadowMap.enabled=!0,c.shadowMap.type=Q,c.setPixelRatio(window.devicePixelRatio),c.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(c.domElement),n=new oe(c),z=new L(0,0);const o={u_time:{type:"f",value:1},u_resolution:{type:"v2",value:new L(800,800)}};S=new Z({uniforms:o,side:ee}),_()}function he(){window.addEventListener("resize",le,!1),window.addEventListener("pointermove",pe),window.addEventListener("keydown",o=>{const{key:i}=o;switch(i){case"e":const t=window.open("","Canvas Image"),{domElement:h}=c,s=h.toDataURL();if(!t)return;t.document.write(`<img src='${s}' width='${h.width}' height='${h.height}'>`);break;case"ArrowRight":n.group.position.x+=100,n.camera.position.x+=100,console.log(n.group.position);break;case"ArrowLeft":n.group.position.x-=100,n.camera.position.x-=100,console.log(n.group.position);break;case"ArrowUp":n.group.position.z-=100,n.camera.position.z-=100,console.log(n.group.position);break;case"ArrowDown":n.group.position.z+=100,n.camera.position.z+=100,console.log(n.group.position);break}})}function le(){n.onWindowResize()}function pe(o){z.x=o.clientX/window.innerWidth*2-1,z.y=-(o.clientY/window.innerHeight)*2+1}function _(){requestAnimationFrame(()=>{_()});let o=G.getDelta();S.uniforms.u_time.value+=o,n.update(G),f&&f.update(),c.render(n.scene,n.camera)}ne();
