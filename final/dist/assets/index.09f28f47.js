var C=Object.defineProperty;var O=(o,e,n)=>e in o?C(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var t=(o,e,n)=>(O(o,typeof e!="symbol"?e+"":e,n),n);import{S as F,P as E,O as H,A as I,a as k,B as j,T as g,M as f,b as y,c as d,d as N,W as V,R as q,G as P,e as v,f as p,g as $,h as U,i as X,j as Y,k as J,l as K,D as Q,C as Z,V as M}from"./vendor.84fc4b09.js";const ee=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&h(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};ee();class te{constructor(e){t(this,"scene");t(this,"camera");t(this,"renderer");t(this,"controls");this.scene=new F,this.camera=new E(55,window.innerWidth/window.innerHeight,45,3e4),this.camera.position.set(0,5e3,7200),this.renderer=e,this.controls=new H(this.camera,this.renderer.domElement)}update(e){}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}class se extends te{constructor(e){super(e);t(this,"lightAmbient");t(this,"lightPoint");t(this,"lightPoint2");t(this,"skybox");t(this,"interstellar");t(this,"galaxy");t(this,"water");t(this,"board");t(this,"person");t(this,"fish");t(this,"group");t(this,"fishGroup");t(this,"bubble");t(this,"bubbleTwo");t(this,"bubbleThree");this.lightAmbient=new I(3355443),this.scene.add(this.lightAmbient),this.lightPoint=new k(16777215),this.lightPoint.position.set(0,1e3,5e3),this.lightPoint.castShadow=!0,this.lightPoint.intensity=.8,this.scene.add(this.lightPoint),this.lightPoint2=new k(16777215),this.lightPoint2.position.set(0,1e3,-5e3),this.lightPoint2.castShadow=!0,this.lightPoint2.intensity=1,this.scene.add(this.lightPoint2);const n=1024,h=.5,s=500;this.lightPoint.shadow.mapSize.width=n,this.lightPoint.shadow.mapSize.height=n,this.lightPoint.shadow.camera.near=h,this.lightPoint.shadow.camera.far=s;const r=["../resources/images/Daylight_Box_Front.png","../resources/images/Daylight_Box_Back.png","../resources/images/Daylight_Box_Top.png","../resources/images/Daylight_Box_Bottom.png","../resources/images/Daylight_Box_Left.png","../resources/images/Daylight_Box_Right.png"],u=["../resources/images/zpos.png","../resources/images/zneg.png","../resources/images/ypos.png","../resources/images/yneg.png","../resources/images/xneg.png","../resources/images/xpos.png"],T=["../resources/images/gloomy_ft.png","../resources/images/gloomy_bk.png","../resources/images/gloomy_up.png","../resources/images/gloomy_dn.png","../resources/images/gloomy_rt.png","../resources/images/gloomy_lf.png"],m=new j(1e4,1e4,1e4),_=r.map(a=>{let l=new g().load(a);return new f({map:l,side:y})});this.skybox=new d(m,_),this.scene.add(this.skybox);const G=u.map(a=>{let l=new g().load(a);return new f({map:l,side:y})});this.interstellar=new d(m,G);const B=T.map(a=>{let l=new g().load(a);return new f({map:l,side:y})});this.galaxy=new d(m,B);const W=new N(1e4,1e4);this.water=new V(W,{textureWidth:510,textureHeight:510,waterNormals:new g().load("../resources/textures/watertexture.jpg",function(a){a.wrapS=a.wrapT=q}),waterColor:742292,distortionScale:10}),this.water.rotation.x=-Math.PI/2,this.scene.add(this.water),this.group=new P,this.scene.add(this.group),new v().load("../resources/models/board.gltf",a=>{this.board=a.scene,this.board.scale.set(2,2,2),this.board.position.y=-520,this.board.position.z=4200,this.board.position.x=-1290,this.board.rotateY(83.2),this.board.traverse(l=>{l.type==="Mesh"&&(l.material=new p({color:6173737}))}),this.group.add(this.board)}),new v().load("../resources/models/clone.gltf",a=>{this.person=a.scene,this.person.scale.set(2,2,2),this.person.position.y=600,this.person.position.z=4e3,this.person.position.x=-20,this.person.traverse(l=>{l.type==="Mesh"&&(l.material=new p({color:13998224}))}),this.group.add(this.person)});const b=new $(400,100),A=new p({color:11526575,opacity:.4,transparent:!0});this.bubble=new d(b,A),this.bubble.position.x=-2200,this.bubble.position.y=600,this.bubble.position.z=-2e3,this.scene.add(this.bubble);const D=new p({color:13041721,opacity:.4,transparent:!0});this.bubbleTwo=new d(b,D),this.bubbleTwo.position.x=2200,this.bubbleTwo.position.y=600,this.bubbleTwo.position.z=-2e3,this.scene.add(this.bubbleTwo);const R=new p({color:11393254,opacity:.4,transparent:!0});this.bubbleThree=new d(b,R),this.bubbleThree.position.y=600,this.bubbleThree.position.z=-2e3,this.scene.add(this.bubbleThree),this.fishGroup=new P,this.scene.add(this.fishGroup)}addFish(){new U().load("../resources/models/fish.obj",n=>{this.fish=n,this.fish.scale.set(20,20,20),this.fish.position.set(Math.random()*(4400+4400+1)-4400,0,Math.random()*(4e3+4e3+1)-4e3),this.fish.rotateX(180.7),this.fish.traverse(h=>{h.type==="Mesh"&&(h.material=new p({color:16753920}))}),this.fishGroup.add(this.fish)})}update(e){this.water.material.uniforms.time.value+=1/30,this.group.position.x==-2200&&this.group.position.z==-6e3?(this.scene.add(this.interstellar),this.scene.children.includes(this.skybox)?this.scene.remove(this.skybox):this.scene.children.includes(this.galaxy)&&this.scene.remove(this.galaxy)):this.group.position.x==2200&&this.group.position.z==-6e3?(this.scene.add(this.galaxy),this.scene.children.includes(this.skybox)?this.scene.remove(this.skybox):this.scene.children.includes(this.galaxy)&&this.scene.remove(this.interstellar)):this.group.position.x==0&&this.group.position.z==-6e3&&(this.scene.add(this.skybox),this.scene.children.includes(this.galaxy)?this.scene.remove(this.galaxy):this.scene.children.includes(this.interstellar)&&this.scene.remove(this.interstellar))}}let c,L=new Z,w,x,i,z;function ie(){ne(),oe(),re()}function oe(){w=new X,document.body.appendChild(w.dom)}function ne(){c=new Y,c.shadowMap.enabled=!0,c.shadowMap.type=J,c.setPixelRatio(window.devicePixelRatio),c.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(c.domElement),i=new se(c),x=new M(0,0);const o={u_time:{type:"f",value:1},u_resolution:{type:"v2",value:new M(800,800)}};z=new K({uniforms:o,side:Q}),S()}function re(){window.addEventListener("resize",ae,!1),window.addEventListener("pointermove",he),window.addEventListener("keydown",o=>{const{key:e}=o;switch(e){case"e":const n=window.open("","Canvas Image"),{domElement:h}=c,s=h.toDataURL();if(!n)return;n.document.write(`<img src='${s}' width='${h.width}' height='${h.height}'>`);break;case"ArrowRight":i.group.position.x+=100,i.camera.position.x+=100,console.log(i.group.position);break;case"ArrowLeft":i.group.position.x-=100,i.camera.position.x-=100,console.log(i.group.position);break;case"ArrowUp":i.group.position.z-=100,i.camera.position.z-=100,console.log(i.group.position);break;case"ArrowDown":i.group.position.z+=100,i.camera.position.z+=100,console.log(i.group.position);break;case"q":i.addFish();break;case"w":i.fishGroup.children.pop();break}})}function ae(){i.onWindowResize()}function he(o){x.x=o.clientX/window.innerWidth*2-1,x.y=-(o.clientY/window.innerHeight)*2+1}function S(){requestAnimationFrame(()=>{S()});let o=L.getDelta();z.uniforms.u_time.value+=o,i.update(L),w&&w.update(),c.render(i.scene,i.camera)}ie();
